<!DOCTYPE html>
<html>
    
    <head>
        
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>GETTING STARTED WITH BRACKETS</title>
        <meta name="description" content="An interactive getting started guide for Brackets.">
        <link rel="stylesheet" href="bootstrap-3.3.7-dist/css/bootstrap.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script src="bootstrap-3.3.7-dist/js/bootstrap.js"></script>
        <link rel="stylesheet" href="main.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>
    
    
    <body>
        <nav class="navbar navbar-inverse" id="ite">
    <div class="container-fluid">
        <div class="col-xs-3">
            <a href="progadget-1.html">
                <img src="logo.png" class="img-rounded" width="150" height="100"/></a>
        </div>
        <div class="col-xs-9 search">
            <div class="input-group">
      
      <input id="search" type="text" class="form-control" name="Search" placeholder="search"maxlength="50" oncopy="return false" onpaste="return false"   onkeypress="return blockSpecialChar(event)">
                <button class="btn btn-primary" type="submit" id="search_btn"><i class="glyphicon glyphicon-search"></i></button>
    </div>
            <ul class="nav navbar-nav navbar-right" style="margin-top: -55px;">
                <li><a id="cartView" href="" data-toggle="modal" data-target="#myModal" ><i class="fa fa-shopping-cart" aria-hidden="true"><!--<span class="badge"><span style="color:blue;">0</span></span>--></i></a></li>
      </ul>
        </div>
            </div>
        </nav>
        
    <div class="container-fluid text-center">    
    <div class="col-sm-12 row content" >
    <div class="col-sm-2">
        <div class="dropdown">
        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" id ="dropdownmenu1" >Shop by Category
    <span class="caret"></span></button>
            
            
    <!----------------CATEGORY ---------------------------->
            
            
            <ul class="dropdown-menu" id="category_list">
               
            </ul>
  </div>
      </div>
        <div class="col-sm-10 text-left"> 
      <div id="myCarousel" class="carousel slide" data-ride="carousel">
    <!-- Indicators -->
    <ol class="carousel-indicators">
      <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
      <li data-target="#myCarousel" data-slide-to="1"></li>
      <li data-target="#myCarousel" data-slide-to="2"></li>
          </ol>

    <!-- Wrapper for slides -->
    <div class="carousel-inner" role="listbox">
      <div class="item active">
        <img src="images.jpeg" width="260" height="245">
      </div>

      <div class="item">
        <img src="images.jpeg"width="260" height="245">
      </div>
    
       <div class="item">
        <img src="images.jpeg"  width="260" height="245">
      </div>

      

    <!-- Left and right controls -->
    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
            </div>
      
          </div>
        </div>
        </div>
    <div class="container-fluid text-center">    
        <div class="col-sm-12" id="products" >
        </div>
        
        
        
        <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">

        <div class="modal-body">

        <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Cart Items</h4>
        </div>




          <table class="table table-bordered" id="bootstrap_git_demo">
    <thead>
      <tr>
        <th>Product Name</th>
        <th>Price</th>
        <th>Edit</th>
      
      </tr>
    </thead>

    <tbody>
      <tr>
        <td id="cart_pro"></td>
        <td id="cart_price"></td>
        <td><button title="" type="button"
            class="btn btn-danger remove show_tip"
            data-original-title="Remove from list">
            <i class="glyphicon glyphicon-remove"></i>
          </button></td>
        
      </tr>


      <script type='text/javascript'>
          
          function blockSpecialChar(e) {
            var k = e.keyCode;
            return ((k > 64 && k < 91) || (k > 96 && k < 123) || k == 8   || (k >= 48 && k <= 57) || (k == 32));
        }

          
          $(document).ready(function(){
            $(function () {
                $("table#bootstrap_git_demo").on("click", ".remove", function () {
                    $("#noOfProduct").empty();
                    $("#noOfProduct").append("0");

                    $.ajax({
                url: "http://localhost:8080/cart/deleteProduct",
                //force to handle it as text
               dataType: "text",
                success: function(data) {
                    console.log(data);
                 $("#myModal1").modal('hide');
                 alert(data);   
                }
                 });

                    $(this).closest('tr').remove();
                });
            });
          });

</script>

            <!-- <button title="" type="button"
            class="btn btn-danger remove show_tip"
            data-original-title="Remove from list">
            <i class="fa fa-trash-o"></i>
          </button>-->


      </tbody>

      </table>

      
    
      <!-- Modal content-->
      <!--<div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Cart Items</h4>
        </div>
</div>

        <!--<div class="modal-body">
          <p>Samsung Galaxy J2</p>
        </div>-->
        <div class="modal-footer text-centre" >
          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal1">Buy Now</button>
        </div>
      </div>
      
    </div>
  </div>
  
    </div>
        
        
        
        
        <div class="modal fade" id="myModal1" role="dialog">
    <div class="modal-dialog">

        <div class="modal-body">

        <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">User Details</h4>
        </div>


  
  <form style="padding: 40px;">
    <div class="form-group">
      <label for="text">Name:<span style="color:red;">*</span></label>
      <input type="text" class="form-control" id="email" placeholder="Enter name">
    </div>
    <div class="form-group">
      <label for="email">Email:<span style="color:red;">*</span></label>
      <input type="email" class="form-control" id="email" placeholder="Enter email">
    </div>

    <button id="buy_now" type="submit" onclick="myfunction()" class="btn btn-primary">Submit</button>
      
      <script>
          function myfunction(){
              
              $("#myModal").modal('hide');
              $("#myModal1").modal('hide');
             
              if(!alert("Confirmation e-mail is sent"))
                  
              document.location.href="progadget-1.html";
             
               
          }
      </script>
  </form>
</div>
        </div></div></div>

        
        
        
        
        
        <script>
$(document).ready(function(){
  $('.dropdown-submenu a.test').on("click", function(e){
    $(this).next('ul').toggle();
    e.stopPropagation();
    e.preventDefault();
  });
    
    $.ajax({
    url: "http://localhost:8081/products",
    //force to handle it as text
    dataType: "text",
    success: function(data) {
       
        //data downloaded so we call parseJSON function 
        //and pass downloaded data
        var json = $.parseJSON(data);
        
        //now json variable contains data in json format
        //let's display a few items
        for (var i=0;i<json.length;++i)
        {
            $("#products").append("<div class='col-sm-4 tree'> <a href='item.html?id=" +json[i].id + "'><img src='images/" + json[i].productImageUrl + "' alt='Image'></a>" +
                "<p>" + json[i].productName + "<br>" + json[i].productCost + "</p></div>");
        }
    }
});
    $.ajax({
    url: "http://localhost:8081/categories",
    //force to handle it as text
    dataType: "text",
    success: function(data) {
      //data downloaded so we call parseJSON function 
        //and pass downloaded data
        var json = $.parseJSON(data);
        //now json variable contains data in json format
        //let's display a few items
        for (var i=0;i<json.length;++i)
        {
            $("#category_list").append("<li id='item" +json[i].id +"'><a href='#'>" + json[i].categoryName + "</a></li>");
        }
    }
});
    
    
          
    
   /////////////////// //CART VIEW /////////////////
  $("#cartView").click(function(){  
     $.ajax({
    url: "http://localhost:8080/cartProducts/",
    //force to handle it as text
    dataType: "text",
    success: function(data) {
        var json = $.parseJSON(data);
       console.log(json);
     $("#cart_pro").empty();
 $("#cart_price").empty();
     $("#cart_pro").append(json[0].productName);
 $("#cart_price").append(json[0].productCost);
    
    }
     });
});
    
    
  $("#search_btn").click(function(){
    var temp = $("#search").val();  
      var tem_url = "http://localhost:8081/products/getByName/" + temp;
      console.log(tem_url);
  $.ajax({
    url: tem_url,
    //force to handle it as text
    dataType: "text",
    success: function(data) {
        var json = $.parseJSON(data);
        console.log(json);
        $("#products").empty();
        if(json.length!=0){
       for (var i=0;i<json.length;++i)
        {
            
            
            $("#products").append("<div class='col-sm-4 tree'><a href='item.html?id=" +json[i].id + "'> <img src='images/" + json[i].productImageUrl + "' alt='Image'></a>" +
                "<p>" + json[i].productName + "<br>" + json[i].productCost + "</p></div>");
        }
        }else{
              $("#products").empty();
            $("#products").append("<h4 style='min-height:100px;'>This product is not available!</h4>");
        }
        
    }
});
  });
    
    
    $("#category_list li").click(function(){
        var temp =$(this).text();
        console.log("hello");
        console.log(temp);
        
     $.ajax({
         
    url: "http://localhost:8081/products/getByCategoryName/" +temp,
    //force to handle it as text
    dataType: "text",
    success: function(data) {
        var json = $.parseJSON(data);
        for (var i=0;i<json.length;++i)
        {
            $("#products").append("<div class='col-sm-4 tree'> <a href='item.html?id=" +json[i].id + "'><img src='images/" + json[i].productImageUrl + "' alt='Image'></a>" +
                "<p>" + json[i].productName + "<br>" + json[i].productCost + "</p></div>");
        }
    }
     });

});
    
    
    
    $("#buy_now").click(function(){
        
                $("#myModal").modal('hide');
         var emailID=$("#email").val();
        var user=$("#name").val();      
  
if (user==null || emailID=="" ){  
  alert("Name or email can't be blank.");  
  return false;  
}
    if(user!=null && emailID!=null){
              $("#myModal1").modal('hide');
              }
       
          
     $.ajax({
    url: "http://localhost:8082/placeOrder/" + emailID+ "/" + user,
    //force to handle it as text
   dataType: "text",
    success: function(data) {
        console.log(data);
     $("#myModal1").modal('hide');
     alert(data);   
        document.location.href="progadget-1.html";
            
    }
     });
        });

});
            
</script>
        
     
        <footer class="text-center">
  <a href="#ite"> Back to top</a>
</footer>
    </body>
</html>